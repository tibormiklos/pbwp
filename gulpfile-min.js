var basePaths={bower:"./bower_components/",node:"./node_modules/",dev:"./src/"},browserSyncWatchFiles=["./css/*.min.css","./js/*.min.js","./**/*.php"],browserSyncOptions={proxy:"peoplesbudget.dev",notify:!1},gulp=require("gulp"),plumber=require("gulp-plumber"),sass=require("gulp-sass"),watch=require("gulp-watch"),cssnano=require("gulp-cssnano"),rename=require("gulp-rename"),concat=require("gulp-concat"),uglify=require("gulp-uglify"),merge2=require("merge2"),imagemin=require("gulp-imagemin"),ignore=require("gulp-ignore"),rimraf=require("gulp-rimraf"),clone=require("gulp-clone"),merge=require("gulp-merge"),sourcemaps=require("gulp-sourcemaps"),browserSync=require("browser-sync").create(),del=require("del"),cleanCSS=require("gulp-clean-css"),gulpSequence=require("gulp-sequence");gulp.task("scss-for-prod",function(){var s=gulp.src("./sass/*.scss").pipe(plumber({errorHandler:function(s){console.log(s),this.emit("end")}})).pipe(sourcemaps.init({loadMaps:!0})).pipe(sass()),e=s.pipe(clone()).pipe(sourcemaps.write(void 0,{sourceRoot:null})).pipe(gulp.dest("./css")).pipe(rename("custom-editor-style.css")),p=s.pipe(clone()).pipe(minify-css()).pipe(rename({suffix:".min"})).pipe(gulp.dest("./css"));return merge(e,p)}),gulp.task("scss-for-dev",function(){gulp.src("./sass/*.scss").pipe(plumber({errorHandler:function(s){console.log(s),this.emit("end")}})).pipe(sourcemaps.init({loadMaps:!0})).pipe(sass()).pipe(sourcemaps.write(void 0,{sourceRoot:null})).pipe(gulp.dest("./css"))}),gulp.task("watch-scss",["browser-sync"],function(){gulp.watch("./sass/**/*.scss",["scss-for-dev"])}),gulp.task("sass",function(){return gulp.src("./sass/*.scss").pipe(plumber({errorHandler:function(s){console.log(s),this.emit("end")}})).pipe(sass()).pipe(gulp.dest("./css")).pipe(rename("custom-editor-style.css"))}),gulp.task("watch",function(){gulp.watch("./sass/**/*.scss",["styles"]),gulp.watch([basePaths.dev+"js/**/*.js","js/**/*.js","!js/theme.js","!js/theme.min.js"],["scripts"]),gulp.watch("./img/**",["imagemin"])}),gulp.task("imagemin",function(){gulp.src("img/src/**").pipe(imagemin()).pipe(gulp.dest("img"))}),gulp.task("cssnano",function(){return gulp.src("./css/theme.css").pipe(sourcemaps.init({loadMaps:!0})).pipe(plumber({errorHandler:function(s){console.log(s),this.emit("end")}})).pipe(rename({suffix:".min"})).pipe(cssnano({discardComments:{removeAll:!0}})).pipe(sourcemaps.write("./")).pipe(gulp.dest("./css/"))}),gulp.task("minify-css",function(){return gulp.src("./css/theme.css").pipe(sourcemaps.init({loadMaps:!0})).pipe(cleanCSS({compatibility:"*"})).pipe(plumber({errorHandler:function(s){console.log(s),this.emit("end")}})).pipe(rename({suffix:".min"})).pipe(sourcemaps.write("./")).pipe(gulp.dest("./css/"))}),gulp.task("cleancss",function(){return gulp.src("./css/*.min.css",{read:!1}).pipe(ignore("theme.css")).pipe(rimraf())}),gulp.task("styles",function(s){gulpSequence("sass","minify-css")(s)}),gulp.task("browser-sync",function(){browserSync.init(browserSyncWatchFiles,browserSyncOptions)}),gulp.task("watch-bs",["browser-sync","watch","scripts"],function(){}),gulp.task("scripts",function(){var s=[basePaths.dev+"js/tether.js",basePaths.dev+"js/bootstrap4/bootstrap.js",basePaths.dev+"js/skip-link-focus-fix.js"];gulp.src(s).pipe(concat("theme.min.js")).pipe(uglify()).pipe(gulp.dest("./js/")),gulp.src(s).pipe(concat("theme.js")).pipe(gulp.dest("./js/"))}),gulp.task("clean-source",function(){return del(["src/**/*"])}),gulp.task("copy-assets",["clean-source"],function(){var s=gulp.src(basePaths.node+"bootstrap/dist/js/**/*.js").pipe(gulp.dest(basePaths.dev+"/js/bootstrap4"));return gulp.src(basePaths.node+"bootstrap/scss/**/*.scss").pipe(gulp.dest(basePaths.dev+"/sass/bootstrap4")),gulp.src(basePaths.node+"font-awesome/fonts/**/*.{ttf,woff,woff2,eof,svg}").pipe(gulp.dest("./fonts")),gulp.src(basePaths.node+"font-awesome/scss/*.scss").pipe(gulp.dest(basePaths.dev+"/sass/fontawesome")),gulp.src(basePaths.node+"jquery/dist/*.js").pipe(gulp.dest(basePaths.dev+"/js")),gulp.src(basePaths.node+"undescores-for-npm/sass/**/*.scss").pipe(gulp.dest(basePaths.dev+"/sass/underscores")),gulp.src(basePaths.node+"undescores-for-npm/js/*.js").pipe(gulp.dest(basePaths.dev+"/js")),gulp.src(basePaths.node+"tether/dist/js/*.js").pipe(gulp.dest(basePaths.dev+"/js")),gulp.src(basePaths.node+"tether/dist/css/*.css").pipe(gulp.dest(basePaths.dev+"/css")),s}),gulp.task("dist",["clean-dist"],function(){gulp.src(["**/*","!bower_components","!bower_components/**","!node_modules","!node_modules/**","!src","!src/**","!dist","!dist/**","!dist-product","!dist-product/**","!sass","!sass/**","!readme.txt","!readme.md","!package.json","!gulpfile.js","!CHANGELOG.md","!.travis.yml","!jshintignore","!codesniffer.ruleset.xml","*"]).pipe(gulp.dest("dist/"))}),gulp.task("clean-dist",function(){return del(["dist/**/*"])}),gulp.task("dist-product",["clean-dist-product"],function(){gulp.src(["**/*","!bower_components","!bower_components/**","!node_modules","!node_modules/**","!dist","!dist/**","!dist-product","!dist-product/**","*"]).pipe(gulp.dest("dist-product/"))}),gulp.task("clean-dist-product",function(){return del(["dist-product/**/*"])});